# –°–¢–ê–¢–ò–ß–ï–°–ö–ò–ô –ê–£–î–ò–¢ –ö–û–ù–°–¢–†–£–ö–¢–û–†–ê –í–ò–ö–ò

## üìã –†–µ–∑—é–º–µ –∞—É–¥–∏—Ç–∞

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 28 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–û–±–ª–∞—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞:** –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (frontend + backend + database)  
**–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:** –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ —Ä–∞–Ω—Ç–∞–π–º–∞  

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. **–û–¢–°–£–¢–°–¢–í–ò–ï –ö–ù–û–ü–ö–ò –£–î–ê–õ–ï–ù–ò–Ø –ë–õ–û–ö–û–í**
- **–§–∞–π–ª:** `frontend/src/widgets/ContextualInspector/index.tsx`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í UI —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –Ω–µ—Ç –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –±–ª–æ–∫–æ–≤
- **API:** –§—É–Ω–∫—Ü–∏—è `deleteLayoutBlock` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- **–í–ª–∏—è–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å –±–ª–æ–∫–∏, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∑–∞—Ö–ª–∞–º–ª–µ–Ω–∏—é

### 2. **–°–ò–°–¢–ï–ú–ê –†–ï–í–ò–ó–ò–ô –ù–ï –°–û–•–†–ê–ù–Ø–ï–¢ –í–õ–û–ñ–ï–ù–ù–û–°–¢–¨**
- **–§–∞–π–ª:** `backend/src/routes/layoutRoutes.ts:249`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –†–µ–≤–∏–∑–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ç–æ–ª—å–∫–æ `block_type, content, position, status`
- **–ü—Ä–æ–ø—É—â–µ–Ω—ã:** `parent_block_id` –∏ `slot` - –∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
- **–í–ª–∏—è–Ω–∏–µ:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ—Ä–µ–≤–æ –±–ª–æ–∫–æ–≤ –∏–∑ —Ä–µ–≤–∏–∑–∏–∏

### 3. **–ù–ï–¢ –°–ï–õ–ï–ö–¢–û–†–ê –°–¢–†–ê–ù–ò–¶ –í –†–ï–î–ê–ö–¢–û–†–ï**
- **–§–∞–π–ª:** `frontend/src/widgets/EditorToolbar/index.tsx`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –†–µ–¥–∞–∫—Ç–æ—Ä –∂–µ—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (pageIdentifier)
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:** UI –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
- **–í–ª–∏—è–Ω–∏–µ:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–π

## ‚ö†Ô∏è –í–´–°–û–ö–û–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 4. **–û–¢–°–£–¢–°–¢–í–ò–ï –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–ò –ì–õ–£–ë–ò–ù–´**
- **–§–∞–π–ª:** `frontend/src/widgets/BlockRenderer/ui/BlockRenderer.tsx`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –±–ª–æ–∫–æ–≤
- **–í–ª–∏—è–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ–Ω–∏–º–∞—é—Ç –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

### 5. **–ù–ï–¢ –ö–ê–°–ö–ê–î–ù–û–ì–û –£–î–ê–õ–ï–ù–ò–Ø**
- **–§–∞–π–ª:** `backend/src/routes/layoutRoutes.ts:158`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –£–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –¥–æ—á–µ—Ä–Ω–∏–µ –±–ª–æ–∫–∏
- **–í–ª–∏—è–Ω–∏–µ:** –û—Ä—Ñ–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### 6. **–û–¢–°–£–¢–°–¢–í–ò–ï –í–ê–õ–ò–î–ê–¶–ò–ò allowedChildren**
- **–§–∞–π–ª:** `frontend/src/widgets/NewLiveEditor/index.tsx:342`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ `allowedChildren` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ DnD, –Ω–æ –Ω–µ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ —á–µ—Ä–µ–∑ API
- **–í–ª–∏—è–Ω–∏–µ:** –í–æ–∑–º–æ–∂–Ω–∞ –≤—Å—Ç–∞–≤–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –±–ª–æ–∫–æ–≤

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ö–û–î–ê

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –°—Ç–∞—Ç—É—Å |
|-----------|------------|--------|
| –í—Å–µ–≥–æ –±–ª–æ–∫–æ–≤ | 13 | ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö –±–ª–æ–∫–æ–≤ | 1 | ‚ö†Ô∏è –¢–æ–ª—å–∫–æ container_section |
| –ê—Ç–æ–º–∞—Ä–Ω—ã—Ö –±–ª–æ–∫–æ–≤ | 12 | ‚úÖ |
| API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ | 19 | ‚úÖ |
| –¢–∞–±–ª–∏—Ü –ë–î | 6 | ‚úÖ |
| –û—Ç–∫—Ä—ã—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º | 6 | üö® |

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–ê–Ø –û–¶–ï–ù–ö–ê

### –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã:
- ‚úÖ –•–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –±–ª–æ–∫–æ–≤
- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ DnD –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –±–ª–æ–∫–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ –∏ —Ä–µ–≤–∏–∑–∏–π (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏)
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏:
- ‚ùå UX —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Ç—Ä–µ–±—É–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- ‚ùå –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≤–∏–∑–∏–π –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ CRUD –≤ UI
- ‚ùå –ù–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–µ—Ä–µ–≤–∞

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### üî• –ö–†–ò–¢–ò–ß–ù–´–ô (1-2 –¥–Ω—è)
1. –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –≤ ContextualInspector
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ parent_block_id/slot –≤ —Ä–µ–≤–∏–∑–∏—è—Ö
3. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü –≤ EditorToolbar

### ‚ö° –í–´–°–û–ö–ò–ô (3-5 –¥–Ω–µ–π)
4. –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≥–ª—É–±–∏–Ω—ã –≤ BlockRenderer
5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤ API
6. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é allowedChildren –≤ API

### üìà –°–†–ï–î–ù–ò–ô (1-2 –Ω–µ–¥–µ–ª–∏)
7. –£–ª—É—á—à–∏—Ç—å UX —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (drag handles, breadcrumbs)
8. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è
9. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å undo/redo –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

## üìÅ –°–û–ó–î–ê–ù–ù–´–ï –ê–†–¢–ï–§–ê–ö–¢–´

```
artifacts/
‚îú‚îÄ‚îÄ model-map.json       # –ü–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ë–î
‚îú‚îÄ‚îÄ api.csv             # –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ blocks.json         # –†–µ–µ—Å—Ç—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±–ª–æ–∫–æ–≤
‚îî‚îÄ‚îÄ crossref.csv        # –ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤

docs/
‚îú‚îÄ‚îÄ audit-summary.md     # –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç
‚îú‚îÄ‚îÄ db-model.md         # –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î
‚îú‚îÄ‚îÄ api-surface.md      # –ê–Ω–∞–ª–∏–∑ API
‚îú‚îÄ‚îÄ components-audit.md # –ê–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ editor-audit.md     # UX —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
‚îî‚îÄ‚îÄ revisions-audit.md  # –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≤–∏–∑–∏–π

tests/
‚îú‚îÄ‚îÄ revision.snapshot.test.ts
‚îú‚îÄ‚îÄ delete.cascade.mock.test.ts
‚îî‚îÄ‚îÄ hierarchy.validation.test.ts

fixtures/
‚îú‚îÄ‚îÄ revision.sample.json
‚îî‚îÄ‚îÄ page.tree.sample.json
```

## üîç –ú–ï–¢–û–î–û–õ–û–ì–ò–Ø –ê–£–î–ò–¢–ê

- ‚úÖ –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î –∏–∑ SQL –∏ TypeScript —Ç–∏–ø–æ–≤
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–µ—Å—Ç—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±–ª–æ–∫–æ–≤
- ‚úÖ –ê—É–¥–∏—Ç UX —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã —Ä–µ–≤–∏–∑–∏–π –∏ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è** - –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–µ–≤–∏–∑–∏–π** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
3. **–î–æ–±–∞–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü** - —Ä–∞—Å—à–∏—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
4. **–í–Ω–µ–¥—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –¥–µ—Ä–µ–≤–∞** - —É–ª—É—á—à–∞–µ—Ç UX
5. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–∏

---

*–ê—É–¥–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º –∫–æ–¥–∞ –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è*
